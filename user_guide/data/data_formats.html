
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data Formats &#8212; Labcore  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/data/data_formats';</script>
    <link rel="canonical" href="https://toolsforexperiments.github.io/labcore/user_guide/data/data_formats.html" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Analysis" href="analysis_example.html" />
    <link rel="prev" title="Data Handling" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt=""/>
    <img src="../../_static/logo.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">Labcore</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../first_steps/index.html">
    First Steps
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://toolsforexperiments.github.io/">
    Tools for Experiments
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://toolsforexperiments.github.io/instrumentserver/">
    Instrumentserver
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://toolsforexperiments.github.io/plottr/">
    Plottr
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/toolsforexperiments/labcore" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../first_steps/index.html">
    First Steps
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://toolsforexperiments.github.io/">
    Tools for Experiments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://toolsforexperiments.github.io/instrumentserver/">
    Instrumentserver
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://toolsforexperiments.github.io/plottr/">
    Plottr
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/toolsforexperiments/labcore" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../measurement/index.html">Measurement</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../measurement/sweep.html">Sweeping</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Data Handling</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Data Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_example.html">Analysis</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../instruments/index.html">Instruments</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../instruments/instrumentserver.html">Instrumentserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instruments/instrumentmonitoring.html">Instrument Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instruments/qcodes_instruments/instruments.html">Our QCoDeS Drivers</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Data Handling</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Data Formats</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="data-formats">
<h1>Data Formats<a class="headerlink" href="#data-formats" title="Link to this heading">#</a></h1>
<section id="in-memory-data">
<h2>In-memory Data<a class="headerlink" href="#in-memory-data" title="Link to this heading">#</a></h2>
<section id="basic-concepts">
<h3>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Link to this heading">#</a></h3>
<p>The main format we’re using within plottr is the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDict" title="labcore.data.datadict.DataDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataDict</span></code></a>. While most of the actual numeric data will typically live in numpy arrays (or lists, or similar), they don’t typically capture easily arbitrary metadata and relationships between arrays. Say, for example, we have some data <code class="docutils literal notranslate"><span class="pre">z</span></code> that depends on two other variables, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>. This information has be stored somewhere, and numpy doesn’t offer readily a solution here. There are various extensions, for example <a class="reference external" href="http://xarray.pydata.org">xarray</a> or the <a class="reference external" href="https://scipy-cookbook.readthedocs.io/items/MetaArray.html">MetaArray class</a>. Those however typically have a grid format in mind, which we do not want to impose. Instead, we use a wrapper around the python dictionary that contains all the required meta information to infer the relevant relationships, and that uses numpy arrays internally to store the numeric data. Additionally we can store any other arbitrary meta data.</p>
<p>A DataDict container (a <code class="docutils literal notranslate"><span class="pre">dataset</span></code>) can contain multiple <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">fields</span></code> (or variables), that have values and can contain their own meta information. Importantly, we distinct between independent fields (the <code class="docutils literal notranslate"><span class="pre">axes</span></code>) and dependent fields (the <code class="docutils literal notranslate"><span class="pre">data</span></code>).</p>
<p>Despite the naming, <code class="docutils literal notranslate"><span class="pre">axes</span></code> is not meant to imply that the <code class="docutils literal notranslate"><span class="pre">data</span></code> have to have a certain shape (but the degree to which this is true depends on the class used). A list of classes for different shapes of data can be found below.</p>
<p>The basic structure of data conceptually looks like this (we inherit from <code class="docutils literal notranslate"><span class="pre">dict</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;data_1&#39;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;axes&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ax1&#39;</span><span class="p">,</span> <span class="s1">&#39;ax2&#39;</span><span class="p">],</span>
        <span class="s1">&#39;unit&#39;</span> <span class="p">:</span> <span class="s1">&#39;some unit&#39;</span><span class="p">,</span>
        <span class="s1">&#39;values&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">],</span>
        <span class="s1">&#39;__meta__&#39;</span> <span class="p">:</span> <span class="s1">&#39;This is very important data&#39;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">},</span>
    <span class="s1">&#39;ax1&#39;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;axes&#39;</span> <span class="p">:</span> <span class="p">[],</span>
        <span class="s1">&#39;unit&#39;</span> <span class="p">:</span> <span class="s1">&#39;some other unit&#39;</span><span class="p">,</span>
        <span class="s1">&#39;values&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">],</span>
        <span class="o">...</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;ax2&#39;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;axes&#39;</span> <span class="p">:</span> <span class="p">[],</span>
        <span class="s1">&#39;unit&#39;</span> <span class="p">:</span> <span class="s1">&#39;a third unit&#39;</span><span class="p">,</span>
        <span class="s1">&#39;values&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">],</span>
        <span class="o">...</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;__globalmeta__&#39;</span> <span class="p">:</span> <span class="s1">&#39;some information about this data set&#39;</span><span class="p">,</span>
    <span class="s1">&#39;__moremeta__&#39;</span> <span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case we have one dependent variable, <code class="docutils literal notranslate"><span class="pre">data_1</span></code>, that depends on two axes, <code class="docutils literal notranslate"><span class="pre">ax1</span></code> and <code class="docutils literal notranslate"><span class="pre">ax2</span></code>. This concept is restricted only in the following way:</p>
<ul class="simple">
<li><p>A dependent can depend on any number of independents.</p></li>
<li><p>An independent cannot depend on other fields itself.</p></li>
<li><p>Any field that does not depend on another, is treated as an axis.</p></li>
</ul>
<p>Note that meta information is contained in entries whose keys start and end with double underscores. Both the DataDict itself, as well as each field can contain meta information.</p>
<p>In the most basic implementation, the only restriction on the data values is that they need to be contained in a sequence (typically as list, or numpy array), and that the length of all values in the data set (the number of <code class="docutils literal notranslate"><span class="pre">records</span></code>) must be equal. Note that this does not preclude nested sequences!</p>
<section id="relevant-data-classes">
<h4>Relevant Data Classes<a class="headerlink" href="#relevant-data-classes" title="Link to this heading">#</a></h4>
<p><strong>DataDictBase:</strong>
The main base class. Only checks for correct dependencies. Any requirements on data structure is left to the inheriting classes. The class contains methods for easy access to data and metadata.</p>
<p><strong>DataDict:</strong>
The only requirement for valid data is that the number of records is the same for all data fields. Contains some tools for expansion of data.</p>
<p><strong>MeshgridDataDict:</strong> For data that lives on a grid (not necessarily regular).</p>
</section>
</section>
</section>
<section id="datadict">
<h2>Datadict<a class="headerlink" href="#datadict" title="Link to this heading">#</a></h2>
<p>!!! note
Because DataDicts are <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">python dictionaries</a> , we highly recommend becoming familiar with them before utilizing DataDicts.</p>
<section id="basic-use">
<h3>Basic Use<a class="headerlink" href="#basic-use" title="Link to this heading">#</a></h3>
<p>We can start by creating an empty DataDict like any other python object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{}</span>
</pre></div>
</div>
<p>We can create the structure of the data_dict by creating dictionary items and populating them like a normal python dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;}}</span>
</pre></div>
</div>
<p>We can also start by creating a DataDict that has the structure of the data we are going to record:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;}, &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;}, &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;]}}</span>
</pre></div>
</div>
<p>The DataDict that we just created contains no data yet, only the structure and relationship of the data fields. We have also specified the unit of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> and which variables are independent variables (<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>), or how we will call them from now on, <code class="docutils literal notranslate"><span class="pre">axes</span></code> and dependent variables (<code class="docutils literal notranslate"><span class="pre">z</span></code>), or, <code class="docutils literal notranslate"><span class="pre">dependents</span></code>.</p>
</section>
<section id="structure">
<h3>Structure<a class="headerlink" href="#structure" title="Link to this heading">#</a></h3>
<p>From the basic and empty DataDict we can already start to inspect its structure. To see the entire structure of a DataDict we can use the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.structure" title="labcore.data.datadict.DataDictBase.structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">structure</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">structure</span><span class="p">()</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;], &#39;unit&#39;: &#39;&#39;, &#39;label&#39;: &#39;&#39;}}</span>
</pre></div>
</div>
<p>We can check for specific things inside the DataDict. We can look at the axes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
<span class="go">[&#39;x&#39;, &#39;y&#39;]</span>
</pre></div>
</div>
<p>We can look at all the dependents:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">dependents</span><span class="p">()</span>
<span class="go">[&#39;z&#39;]</span>
</pre></div>
</div>
<p>We can also see the shape of a DataDict by using the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.shapes" title="labcore.data.datadict.DataDictBase.shapes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shapes</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">shapes</span><span class="p">()</span>
<span class="go">{&#39;x&#39;: (0,), &#39;y&#39;: (0,), &#39;z&#39;: (0,)}</span>
</pre></div>
</div>
</section>
<section id="populating-the-datadict">
<h3>Populating the DataDict<a class="headerlink" href="#populating-the-datadict" title="Link to this heading">#</a></h3>
<p>One of the only “restrictions” that DataDict implements is that every data field must have the same number of records (items). However, restrictions is in quotes because there is nothing that is stopping you from having different data fields have different number of records, this will only make the DataDict invalid. We will explore what his means later.</p>
<p>There are 2 different ways of safely populating a DataDict, adding data to it or appending 2 different DataDict to each other.</p>
<p>!!! note
You can always manually update the item <code class="docutils literal notranslate"><span class="pre">values</span></code> any data field like any other item of a python dictionary, however, populating the DataDict this way can result in an invalid DataDict if you are not being careful. Both population methods presented below contains checks to make sure that the new data being added will not create an invalid DataDict.</p>
<p>We can add data to an existing DataDict with the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDict.add_data" title="labcore.data.datadict.DataDict.add_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_data</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;],  &#39;unit&#39;: &#39;&#39;,  &#39;label&#39;: &#39;&#39;,  &#39;values&#39;: array([0, 1, 4])}}</span>
</pre></div>
</div>
<p>We now have a populated DataDict. It is important to notice that this method will also add any of the missing special keys that a data field doesn’t have (<code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">axes</span></code>, <code class="docutils literal notranslate"><span class="pre">unit</span></code>, and <code class="docutils literal notranslate"><span class="pre">label</span></code>). Populating the DataDict with this method will also ensure that every item has the same number of records and the correct shape, either by adding <code class="docutils literal notranslate"><span class="pre">nan</span></code> to the other data fields or by nesting the data arrays so that the outer most dimension of every data field has the same number of records.</p>
<p>We can see this in action if we add a single record to a data field with items but no the rest:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2, 9])},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([ 0.,  1.,  2., nan])},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;], &#39;unit&#39;: &#39;&#39;, &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([ 0.,  1.,  4., nan])}}</span>
</pre></div>
</div>
<p>As we can see, both <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> have an extra <code class="docutils literal notranslate"><span class="pre">nan</span></code> record in them. We can observe the change of dimension if we do not add the same number of records to all data fields:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([[0, 1, 2]])},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([[0, 1, 2]])},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;], &#39;unit&#39;: &#39;&#39;, &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0])}}</span>
</pre></div>
</div>
<p>If we want to expand our DataDict by appending another one, we need to make sure that both of our DataDicts have the same inner structure. We can check that by utilizing the static method <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.same_structure" title="labcore.data.datadict.DataDictBase.same_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">same_structure</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict_1</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">z</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict_2</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">z</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict_1</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict_2</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">16</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DataDict</span><span class="o">.</span><span class="n">same_structure</span><span class="p">(</span><span class="n">data_dict_1</span><span class="p">,</span> <span class="n">data_dict_2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>!!! note
Make sure that both DataDicts have the exact same structure. This means that every item of every data field that appears when using the method <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.same_structure" title="labcore.data.datadict.DataDictBase.same_structure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">same_structure</span></code></a> (<code class="docutils literal notranslate"><span class="pre">unit</span></code>, <code class="docutils literal notranslate"><span class="pre">axes</span></code>, and <code class="docutils literal notranslate"><span class="pre">label</span></code>) are identical to one another, except for <code class="docutils literal notranslate"><span class="pre">values</span></code>. Any slight difference will make this method fail due to conflicting structures.</p>
<p>The <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDict.append" title="labcore.data.datadict.DataDict.append"><code class="xref py py-meth docutils literal notranslate"><span class="pre">append</span></code></a> method will do this check before appending the 2 DataDict, and will only append them if the check returns <code class="docutils literal notranslate"><span class="pre">True</span></code>. Once we know that the structure is the same we can append them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_dict_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict_1</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2, 3, 4])},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2, 3, 4])},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;], &#39;unit&#39;: &#39;&#39;, &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([ 0,  1,  4,  9, 16])}}</span>
</pre></div>
</div>
</section>
<section id="meta-data">
<h3>Meta Data<a class="headerlink" href="#meta-data" title="Link to this heading">#</a></h3>
<p>One of the advantages DataDicts have over regular python dictionaries is their ability to contain meta data. Meta data can be added to the entire DataDict or to individual data fields. Any object inside a <code class="docutils literal notranslate"><span class="pre">DataDict</span></code> whose key starts and ends with two underscores is considered meta data.</p>
<p>We can simply add meta data manually by adding an item with the proper notation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;__metadata__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;important meta data&#39;</span>
</pre></div>
</div>
<p>Or we can use the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.add_meta" title="labcore.data.datadict.DataDictBase.add_meta"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_meta</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">add_meta</span><span class="p">(</span><span class="s1">&#39;sample_temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;10mK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;], &#39;unit&#39;: &#39;&#39;, &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 4])},</span>
<span class="go"> &#39;__metadata__&#39;: &#39;important meta data&#39;,</span>
<span class="go"> &#39;__sample_temperature__&#39;: &#39;10mK&#39;}</span>
</pre></div>
</div>
<p>We can also add meta data to a specific data field by passing its name as the last argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">has_meta</span><span class="p">(</span><span class="s1">&#39;sample_temperature&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>We can retrieve the meta data with the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.meta_val" title="labcore.data.datadict.DataDictBase.meta_val"><code class="xref py py-meth docutils literal notranslate"><span class="pre">meta_val</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">meta_val</span><span class="p">(</span><span class="s1">&#39;sample_temperature&#39;</span><span class="p">)</span>
<span class="go">&#39;10mK&#39;</span>
</pre></div>
</div>
<p>We can also ask for a meta value from a specific data field by passing the data field as the second argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">meta_val</span><span class="p">(</span><span class="s1">&#39;extra_metadata&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="go">&#39;important meta data&#39;</span>
</pre></div>
</div>
<p>We can delete a specific meta field by using the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.delete_meta" title="labcore.data.datadict.DataDictBase.delete_meta"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_meta</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">delete_meta</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">has_meta</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This also work for meta data in data fields by passing the data field as the last argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">delete_meta</span><span class="p">(</span><span class="s1">&#39;extra_metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="go">{&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])}</span>
</pre></div>
</div>
<p>We can delete all the meta data present in the DataDict with the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase.clear_meta" title="labcore.data.datadict.DataDictBase.clear_meta"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_meta</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">add_meta</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;important meta data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">add_meta</span><span class="p">(</span><span class="s1">&#39;extra_metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;important meta data&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">clear_meta</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])},</span>
<span class="go"> &#39;y&#39;: {&#39;unit&#39;: &#39;m&#39;, &#39;axes&#39;: [], &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 2])},</span>
<span class="go"> &#39;z&#39;: {&#39;axes&#39;: [&#39;x&#39;, &#39;y&#39;], &#39;unit&#39;: &#39;&#39;, &#39;label&#39;: &#39;&#39;, &#39;values&#39;: array([0, 1, 4])}}</span>

</pre></div>
</div>
<p>!!! note
There are 3 helper functions in the datadict module that help converting from meta data name to key. These are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  * {py:func}`is_meta_key &lt;labcore.data.datadict.is_meta_key&gt;`,
  * {py:func}`meta_key_to_name &lt;labcore.data.datadict.meta_key_to_name&gt;`
  * {py:func}`meta_name_to_key &lt;labcore.data.datadict.meta_name_to_key&gt;`
</pre></div>
</div>
</section>
<section id="meshgrid-datadict">
<h3>Meshgrid DataDict<a class="headerlink" href="#meshgrid-datadict" title="Link to this heading">#</a></h3>
<p>A dataset where the axes form a grid on which the dependent values reside.</p>
<p>This is a more special case than DataDict, but a very common scenario. To support flexible grids, this class requires that all axes specify values for each datapoint, rather than a single row/column/dimension.</p>
<p>For example, if we want to specify a 3-dimensional grid with axes <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code>, the values of <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code> all need to be 3-dimensional arrays; the same goes for all dependents that live on that grid. Then, say, <code class="docutils literal notranslate"><span class="pre">x[i,j,k]</span></code> is the x-coordinate of point <code class="docutils literal notranslate"><span class="pre">i</span></code>,<code class="docutils literal notranslate"><span class="pre">j</span></code>,<code class="docutils literal notranslate"><span class="pre">k</span></code> of the grid.</p>
<p>This implies that a MeshgridDataDict can only have a single shape, i.e., all data values share the exact same nesting structure.</p>
<p>For grids where the axes do not depend on each other, the correct values for the axes can be obtained from <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.meshgrid.html">np.meshgrid</a> (hence the name of the class).</p>
<p>Example: a simple uniform 3x2 grid might look like this; x and y are the coordinates of the grid, and z is a function of the two:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>

    <span class="n">y</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>

    <span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">=</span>
        <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>

</pre></div>
</div>
<p>!!! note
Internally we will typically assume that the nested axes are ordered from slow to fast, i.e., dimension 1 is the most outer axis, and dimension N of an N-dimensional array the most inner (i.e., the fastest changing one). This guarantees, for example, that the default implementation of <code class="docutils literal notranslate"><span class="pre">np.reshape</span></code> has the expected outcome. If, for some reason, the specified axes are not in that order (e.g., we might have <code class="docutils literal notranslate"><span class="pre">z</span></code> with <code class="docutils literal notranslate"><span class="pre">axes</span> <span class="pre">=</span> <span class="pre">['x',</span> <span class="pre">'y']</span></code>, but <code class="docutils literal notranslate"><span class="pre">x</span></code> is the fast axis in the data). In such a case, the guideline is that at creation of the meshgrid, the data should be transposed such that it conforms correctly to the order as given in the <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">=</span> <span class="pre">[...]</span></code> specification of the data. The function <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.datadict_to_meshgrid" title="labcore.data.datadict.datadict_to_meshgrid"><code class="xref py py-func docutils literal notranslate"><span class="pre">datadict_to_meshgrid</span></code></a> provides options for that.</p>
<p>This implementation of <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDictBase" title="labcore.data.datadict.DataDictBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataDictBase</span></code></a> consists only of three extra methods:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.MeshgridDataDict.shape" title="labcore.data.datadict.MeshgridDataDict.shape"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shape</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.MeshgridDataDict.validate" title="labcore.data.datadict.MeshgridDataDict.validate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">validate</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.MeshgridDataDict.reorder_axes" title="labcore.data.datadict.MeshgridDataDict.reorder_axes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reorder_axes</span></code></a></p></li>
</ul>
<p>So the only way of populating it is by manually modifying the <code class="docutils literal notranslate"><span class="pre">values</span></code> object of each data field since the tools for populating the DataDict are specific to the <a class="reference internal" href="../../api/generated/labcore.data.datadict.html#labcore.data.datadict.DataDict" title="labcore.data.datadict.DataDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataDict</span></code></a> implementation.</p>
</section>
</section>
<section id="datadict-storage">
<h2>DataDict Storage<a class="headerlink" href="#datadict-storage" title="Link to this heading">#</a></h2>
<p>The datadict_storage.py module offers tools to help with saving DataDicts into disk by storing them in DDH5 files (<a class="reference external" href="https://en.wikipedia.org/wiki/Hierarchical_Data_Format">HDF5 files</a> that contains DataDicts inside).</p>
<section id="description-of-the-hdf5-storage-format">
<h3>Description of the HDF5 Storage Format<a class="headerlink" href="#description-of-the-hdf5-storage-format" title="Link to this heading">#</a></h3>
<p>We use a simple mapping from DataDict to the HDF5 file. Within the file, a single DataDict is stored in a (top-level) group of the file.
The data fields are datasets within that group.</p>
<p>Global meta data of the DataDict are attributes of the group; field meta data are attributes of the dataset (incl., the <code class="docutils literal notranslate"><span class="pre">unit</span></code> and <code class="docutils literal notranslate"><span class="pre">axes</span></code> values). The meta data keys are given exactly like in the DataDict, i.e., includes the double underscore pre- and suffix.</p>
<p>For more specific information on how HDF5 works please read the <a class="reference external" href="https://docs.hdfgroup.org/hdf5/v1_14/_h5_d_m__u_g.html#subsec_data_model_intro">following documentation</a></p>
</section>
<section id="working-with-ddh5-files">
<h3>Working With DDH5 Files<a class="headerlink" href="#working-with-ddh5-files" title="Link to this heading">#</a></h3>
<p>When we are working with data, the first thing we usually want to do is to save it in disk. We can directly save an already existing DataDict into disk by calling the function <a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.datadict_to_hdf5" title="labcore.data.datadict_storage.datadict_to_hdf5"><code class="xref py py-func docutils literal notranslate"><span class="pre">datadict_to_hdf5</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">axes</span><span class="o">=</span><span class="p">[],</span> <span class="n">__unit__</span><span class="o">=</span><span class="s1">&#39;cm&#39;</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]),</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span>
<span class="go">{&#39;x&#39;: {&#39;values&#39;: array([0, 1, 2]), &#39;axes&#39;: [], &#39;__unit__&#39;: &#39;cm&#39;},</span>
<span class="go"> &#39;y&#39;: {&#39;values&#39;: array([3, 4, 5]), &#39;axes&#39;: [&#39;x&#39;]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datadict_to_hdf5</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.datadict_to_hdf5" title="labcore.data.datadict_storage.datadict_to_hdf5"><code class="xref py py-func docutils literal notranslate"><span class="pre">datadict_to_hdf5</span></code></a> will save data_dict in a file named ‘data.ddh5’ in whatever directory is passed to it, creating new folders if they don’t already exists. The file will contain all of the data fields as well as all the metadata,
with some more metadata generated to specify when the DataDict was created.</p>
<p>!!! note
Meta data is only written during initial writing of the dataset. If we’re appending to existing datasets, we’re not setting meta data anymore.</p>
<p>!!! warning
For this method to properly work the objects that are being saved in the <code class="docutils literal notranslate"><span class="pre">values</span></code> key of a data field must by a numpy array, or numpy array like.</p>
<p>Data saved on disk is useless however if we do not have a way of accessing it. To do this we use the <a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.datadict_from_hdf5" title="labcore.data.datadict_storage.datadict_from_hdf5"><code class="xref py py-func docutils literal notranslate"><span class="pre">datadict_from_hdf5</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_data_dict</span> <span class="o">=</span> <span class="n">datadict_from_hdf5</span><span class="p">(</span><span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_data_dict</span>
<span class="go">{&#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go"> &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go"> &#39;x&#39;: {&#39;values&#39;: array([0, 1, 2]),</span>
<span class="go">  &#39;axes&#39;: [],</span>
<span class="go">  &#39;__shape__&#39;: (3,),</span>
<span class="go">  &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;__unit__&#39;: &#39;cm&#39;,</span>
<span class="go">  &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">  &#39;label&#39;: &#39;&#39;},</span>
<span class="go"> &#39;y&#39;: {&#39;values&#39;: array([3, 4, 5]),</span>
<span class="go">  &#39;axes&#39;: [&#39;x&#39;],</span>
<span class="go">  &#39;__shape__&#39;: (3,),</span>
<span class="go">  &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">  &#39;label&#39;: &#39;&#39;}}</span>
</pre></div>
</div>
<p>We can see that the DataDict is the same one we saved earlier with the added metadata that indicates the time it was created.</p>
<p>By default both <a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.datadict_to_hdf5" title="labcore.data.datadict_storage.datadict_to_hdf5"><code class="xref py py-func docutils literal notranslate"><span class="pre">datadict_to_hdf5</span></code></a> and <a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.datadict_from_hdf5" title="labcore.data.datadict_storage.datadict_from_hdf5"><code class="xref py py-func docutils literal notranslate"><span class="pre">datadict_from_hdf5</span></code></a> save and load the datadict in the ‘data’ group of the DDH5. Both of these can by changed by passing another group to the argument ‘groupname’. We can see this if we manually create a second group and save a new DataDict there:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict2</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">axes</span><span class="o">=</span><span class="p">[],</span> <span class="n">__unit__</span><span class="o">=</span><span class="s1">&#39;cm&#39;</span><span class="p">),</span> <span class="n">b</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]),</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">file</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s1">&#39;other_data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datadict_to_hdf5</span><span class="p">(</span><span class="n">data_dict2</span><span class="p">,</span> <span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">,</span> <span class="n">groupname</span><span class="o">=</span><span class="s1">&#39;other_data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If we then load the DDH5 file like before we only see the first DataDict:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_data_dict</span> <span class="o">=</span> <span class="n">datadict_from_hdf5</span><span class="p">(</span><span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_data_dict</span>
<span class="go">{&#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go"> &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go"> &#39;x&#39;: {&#39;values&#39;: array([0, 1, 2]),</span>
<span class="go">  &#39;axes&#39;: [],</span>
<span class="go">  &#39;__shape__&#39;: (3,),</span>
<span class="go">  &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;__unit__&#39;: &#39;cm&#39;,</span>
<span class="go">  &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">  &#39;label&#39;: &#39;&#39;},</span>
<span class="go"> &#39;y&#39;: {&#39;values&#39;: array([3, 4, 5]),</span>
<span class="go">  &#39;axes&#39;: [&#39;x&#39;],</span>
<span class="go">  &#39;__shape__&#39;: (3,),</span>
<span class="go">  &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">  &#39;label&#39;: &#39;&#39;}}</span>
</pre></div>
</div>
<p>To see the other DataDict we can specify the group in the argument ‘groupname’:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_data_dict</span> <span class="o">=</span> <span class="n">datadict_from_hdf5</span><span class="p">(</span><span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">,</span> <span class="s1">&#39;other_data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_data_dict</span>
<span class="go">{&#39;a&#39;: {&#39;values&#39;: array([0, 1, 2]),</span>
<span class="go">  &#39;axes&#39;: [],</span>
<span class="go">  &#39;__shape__&#39;: (3,),</span>
<span class="go">  &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;__unit__&#39;: &#39;cm&#39;,</span>
<span class="go">  &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">  &#39;label&#39;: &#39;&#39;},</span>
<span class="go"> &#39;b&#39;: {&#39;values&#39;: array([3, 4, 5]),</span>
<span class="go">  &#39;axes&#39;: [&#39;a&#39;],</span>
<span class="go">  &#39;__shape__&#39;: (3,),</span>
<span class="go">  &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">  &#39;label&#39;: &#39;&#39;}}</span>
</pre></div>
</div>
<p>We can also use <a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.all_datadicts_from_hdf5" title="labcore.data.datadict_storage.all_datadicts_from_hdf5"><code class="xref py py-func docutils literal notranslate"><span class="pre">all_datadicts_from_hdf5</span></code></a> to get a dictionary with all DataDicts in every group inside:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">all_datadicts</span> <span class="o">=</span> <span class="n">all_datadicts_from_hdf5</span><span class="p">(</span><span class="s1">&#39;folder\data.ddh5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_datadicts</span>
<span class="go">{&#39;data&#39;: {&#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">  &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">  &#39;x&#39;: {&#39;values&#39;: array([0, 1, 2]),</span>
<span class="go">   &#39;axes&#39;: [],</span>
<span class="go">   &#39;__shape__&#39;: (3,),</span>
<span class="go">   &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">   &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">   &#39;__unit__&#39;: &#39;cm&#39;,</span>
<span class="go">   &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">   &#39;label&#39;: &#39;&#39;},</span>
<span class="go">  &#39;y&#39;: {&#39;values&#39;: array([3, 4, 5]),</span>
<span class="go">   &#39;axes&#39;: [&#39;x&#39;],</span>
<span class="go">   &#39;__shape__&#39;: (3,),</span>
<span class="go">   &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">   &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">   &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">   &#39;label&#39;: &#39;&#39;}},</span>
<span class="go"> &#39;other_data&#39;: {&#39;a&#39;: {&#39;values&#39;: array([0, 1, 2]),</span>
<span class="go">   &#39;axes&#39;: [],</span>
<span class="go">   &#39;__shape__&#39;: (3,),</span>
<span class="go">   &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">   &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">   &#39;__unit__&#39;: &#39;cm&#39;,</span>
<span class="go">   &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">   &#39;label&#39;: &#39;&#39;},</span>
<span class="go">  &#39;b&#39;: {&#39;values&#39;: array([3, 4, 5]),</span>
<span class="go">   &#39;axes&#39;: [&#39;a&#39;],</span>
<span class="go">   &#39;__shape__&#39;: (3,),</span>
<span class="go">   &#39;__creation_time_sec__&#39;: 1651159636.0,</span>
<span class="go">   &#39;__creation_time_str__&#39;: &#39;2022-04-28 10:27:16&#39;,</span>
<span class="go">   &#39;unit&#39;: &#39;&#39;,</span>
<span class="go">   &#39;label&#39;: &#39;&#39;}}}</span>
</pre></div>
</div>
</section>
<section id="ddh5-writer">
<h3>DDH5 Writer<a class="headerlink" href="#ddh5-writer" title="Link to this heading">#</a></h3>
<p>Most times we want to be saving data to disk as soon as it is generated by an experiment (or iteration), instead of waiting to have a complete DataDict. To do this, Datadict_storage also offers a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#context-manager-types">context manager</a> with which we can safely save our incoming data.</p>
<p>To use it we first need to create an empty DataDict that contains the structure of how the data is going to look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">DataDict</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;x_unit&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;y_unit&#39;</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>With our created DataDict, we can start the <a class="reference internal" href="../../api/generated/labcore.data.datadict_storage.html#labcore.data.datadict_storage.DDH5Writer" title="labcore.data.datadict_storage.DDH5Writer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDH5Writer</span></code></a> context manager and add data to our DataDict utilizing the <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_data</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">DDH5Writer</span><span class="p">(</span><span class="n">datadict</span><span class="o">=</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">basedir</span><span class="o">=</span><span class="s1">&#39;./data/&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Test&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">writer</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Data location:  data\2022-04-27\2022-04-27T145308_a986867c-Test\data.ddh5</span>
</pre></div>
</div>
<p>The writer created the folder ‘data’ (because it did not exist before) and inside that folder,
created another new folder for the current day and another new folder inside of it day folder for the the DataDict that we saved with the naming structure of <code class="docutils literal notranslate"><span class="pre">YYYY-mm-dd_THHMMSS_&lt;ID&gt;-&lt;name&gt;/&lt;filename&gt;.ddh5</span></code>,
where name is the name parameter passed to the writer.
The writer creates this structure such that when we run the writer again with new data, it will create another folder following the naming structure inside the current date folder.
This way each new DataDict will be saved in the date it was generated with a time stamp in the name of the folder containing it.</p>
</section>
<section id="change-file-extension-and-time-format">
<h3>Change File Extension and Time Format<a class="headerlink" href="#change-file-extension-and-time-format" title="Link to this heading">#</a></h3>
<p>Finally, datadict_storage contains 2 module variables, ‘DATAFILEXT’ and ‘TIMESTRFORMAT’.</p>
<p>‘DATAFILEXT’ by default is ‘ddh5’, and it is used to specify the extension file of all of the module saving functions. Change this variable if you want your HDF5 to have a different extension by default, instead of passing it everytime.</p>
<p>‘TIMESTRFORMAT’ specifies how the time is formated in the new metadata created when saving a DataDict. The default is: <code class="docutils literal notranslate"><span class="pre">&quot;%Y-%m-%d</span> <span class="pre">%H:%M:%S&quot;</span></code>, and it follows the structure of <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime%3E">strftime</a>.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Data Handling</p>
      </div>
    </a>
    <a class="right-next"
       href="analysis_example.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#in-memory-data">In-memory Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-concepts">Basic Concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#relevant-data-classes">Relevant Data Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datadict">Datadict</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-use">Basic Use</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#populating-the-datadict">Populating the DataDict</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#meta-data">Meta Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#meshgrid-datadict">Meshgrid DataDict</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datadict-storage">DataDict Storage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-the-hdf5-storage-format">Description of the HDF5 Storage Format</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-ddh5-files">Working With DDH5 Files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ddh5-writer">DDH5 Writer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-file-extension-and-time-format">Change File Extension and Time Format</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/user_guide/data/data_formats.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025-2026, Marcos Frenkel, Wolfgang Pfaff, Cynthia Nolan.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__center">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>